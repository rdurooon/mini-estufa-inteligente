<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Estilos -->
    <link rel="stylesheet" href="./style.css" />
    <link rel="icon" href="./img/favicon.ico" type="image/x-icon" />

    <title>SIA - Controle da Estufa</title>
  </head>

  <body>
    <!-- ============================================================
         HEADER / LOGO
    ============================================================ -->
    <header class="header-logo">
      <img src="./img/logo.png" alt="Logo do Projeto" />
      <span>Painel de Controle</span>

      <button id="btn-help" class="help-button">?</button>
      <button id="theme-toggle" class="theme-toggle">üåô</button>
    </header>

    <!-- ============================================================
         MENU DE NAVEGA√á√ÉO
    ============================================================ -->
    <nav class="menu">
      <a href="index.html" class="active">Controle</a>
      <a href="status.html">Status & Relat√≥rios</a>
    </nav>

    <!-- ============================================================
         CONTE√öDO PRINCIPAL
    ============================================================ -->
    <main class="ciaxa-principal">
      <!-- ======================== CONTROLE MANUAL E AUTOM√ÅTICO ======================== -->
      <section class="section-control">
        <h2>Controle da Estufa</h2>

        <!-- Switch do modo autom√°tico -->
        <div class="auto-mode-row">
          <span>Modo Autom√°tico</span>

          <label class="switch">
            <input type="checkbox" id="auto-switch" />
            <span class="slider"></span>
          </label>
        </div>

        <!-- Bot√µes principais -->
        <div class="control-buttons">
          <button id="btn-estufa-master" class="off">Ligar Estufa</button>
          <button id="btn-luz" class="off">Ligar Ilumina√ß√£o</button>
          <button id="btn-fans" class="off">Ligar Ventila√ß√£o</button>
          <button id="btn-regar" class="off">Ligar Regadores</button>
        </div>
      </section>

      <!-- ======================== STATUS RESUMIDO ======================== -->
      <section class="section-status">
        <h2>Status Atual</h2>

        <div class="status-info">
          <p>
            Ilumina√ß√£o:
            <span id="state-luz" class="status-indicator off">Desligada</span>
          </p>

          <p>
            Ventila√ß√£o (Fans):
            <span id="state-fans" class="status-indicator off">Desligada</span>
          </p>

          <p>
            Regadores:
            <span id="state-regar" class="status-indicator off">Desligado</span>
          </p>
        </div>
      </section>
    </main>

    <!-- ============================================================
         POPUP DE CONFIGURA√á√ïES DO MODO AUTOM√ÅTICO
    ============================================================ -->
    <div id="popup-parametros" class="popup">
      <div class="popup-content">
        <h3>Configurar Modo Autom√°tico</h3>

        <label for="temp-limite">Temperatura M√°xima (¬∞C):</label>
        <input type="number" id="temp-limite" min="15" max="40" value="28" />

        <label for="umid-solo-limite">Umidade do Solo (%) m√≠nima:</label>
        <input
          type="number"
          id="umid-solo-limite"
          min="10"
          max="100"
          value="40"
        />

        <label for="lum-auto-switch">Ligar luz na aus√™ncia de luz natural?</label>
        <select id="lum-auto-switch">
            <option value="1">Sim, ligar automaticamente</option>
            <option value="0">N√£o, manter desligada</option>
        </select>

        <div class="popup-buttons">
          <button id="cancel-popup">Cancelar</button>
          <button id="save-popup">Salvar</button>
        </div>
      </div>
    </div>

    <!-- ============================================================
         MODAL DE AJUDA (GLOBAL)
    ============================================================ -->
    <div id="help-modal" class="help-modal">
      <div class="help-modal-content">
        <h3>D√∫vidas - Como Usar o Sistema</h3>

        <ul>
          <li>
            <strong>Ligar Estufa:</strong> Ativa/desativa ilumina√ß√£o, ventila√ß√£o
            e irriga√ß√£o simultaneamente.
          </li>

          <li>
            <strong>Ligar Ilumina√ß√£o:</strong> Controla as luzes internas da
            estufa.
          </li>

          <li>
            <strong>Ligar Ventila√ß√£o:</strong> Aciona as fans para controle
            t√©rmico e circula√ß√£o de ar.
          </li>

          <li>
            <strong>Ligar Regadores:</strong> Ativa a irriga√ß√£o (ciclo m√°ximo:
            30s por acionamento).
          </li>

          <li>
            <strong>Modo Autom√°tico:</strong> Gerencia todos os equipamentos com
            base nos limites configurados.
          </li>

          <li>
            <strong>Status & Relat√≥rios:</strong> Mostra dados de sensores em
            tempo real e gr√°ficos hist√≥ricos.
          </li>

          <li>
            <strong>Baixar Relat√≥rio:</strong> Exporta dados em CSV para an√°lise
            externa.
          </li>
        </ul>

        <button id="close-help">Fechar</button>
      </div>
    </div>

    <!-- ============================================================
         TOASTS / CARREGAMENTO
    ============================================================ -->
    <div id="toast-container"></div>

    <div id="loading-overlay" class="loading-overlay">
      <div class="loading-spinner"></div>
      <p>Carregando...</p>
    </div>

    <!-- ============================================================
         SCRIPTS
    ============================================================ -->
    <script src="./main.js"></script>
  </body>
</html>
